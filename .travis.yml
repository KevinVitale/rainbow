matrix:
  include:
  - language: objective-c
    osx_image: xcode10.2
    xcode_sdk: iphonesimulator12.2
    xcode_destination: platform=iOS Simulator,OS=12.2,name=iPhone X
    env: NODE_VERSION=10.15.3
    branches:
      only:
      - master
    cache: yarn
    install:
    - nvm --version
    - echo $NODE_VERSION
    - sudo launchctl limit maxfiles 2048 unlimited
    - sudo ulimit -n 10000
    - brew tap wix/brew
    - brew install applesimutils
    - brew update
    - nvm install $NODE_VERSION
    - nvm use $NODE_VERSION
    - nvm alias default $NODE_VERSION
    - brew install yarn
    - yarn cache clean
    - yarn install --network-concurrency 1
    - yarn global add react-native-cli
    - yarn global add detox-cli
    - yarn
    - yarn nodeify
    - pod repo update
    - yarn install-pods
    - FORCE_BUNDLING=1 detox build -c ios.sim.release
    script:
    - detox test -c ios.sim.release --no-color --headless --cleanup
env:
  global:
  - secure: dW72ggzgzQl66Y+LAYxMYQUMHomzsJQl4inBjvoavt9LRrP0OMpZCeMUPSrHgnt35KLtHmVJc/pTd9GI3gVeI5aZ3OTGMkYHg1i3iST+GEQdKDS5mlUvH/M24sLoFf180ETmtpLf1+fggqpIkSxgluC0rQfM8CgLptr49zYnqNlM3zFe89G6sW0PwY3xpa8SZVw+2SQfpeICs78uaGp5YDOgjhuqgaW2sBpiFXEwbGmqRTsrq+68PMMskObTAi5r8KIipR6bGO0pkETk4uL/eAXVSTqzOiGXOxdVDDdArwffMQ1MI7nrQh5kp7HYbs05g4jZGJubgQoOQ1bbwRS+tRY2uU8TY+V+uEBhXIy0vwvJjezBtN2i8rMuk18hz+y2xBvgbyDzaSsE2CjwJCJDNNFEHq3yaQ7SX84BAnCmfbi/dvyiF2OWpGBokDFUUbM2fjdmYd6tomDitioocaxWBs3i9elwDEZe+iiWswtJ9Da4bnM7DuQz+HcAt39A/cywmssDVSF71sOm0cJCK95GCKUCBTYbUu2R6yfPfbgQC729Zdpw6NJKV7wS4NUImL0FTDduIXq7gCL06jM7wDSB0G0SAXUxvZ7zOXf6u+0x87O4Si157spREGSrRQAPaQMFw1FVFtprVhJ8DN7ZEanfLhedl7x98VWdgJatNkGLBNI=
  - secure: Aq1fgzQQ9McDS/BgzgXN0FhghkciDMMyAvUmkSforcixC6axER1UauqGYWdykHBYsdOBzlH/vwhl2PPI23mfrvXte5htBTbm0XklCbTXCCezQTNEU8qLnFGZe3DzYMR4+IOgIyc4swO+vlGvGG/i2QSFEMUJE8aUpd6iBDEcxSctoq4y2mozyHu2RdXyzgU+IPyaRHa2JK3pjD4HWLe2wTAwzZ/HA4Boj3zKGvAO72/10ABLk/Ok48Dm2x0PQm1jdy+vnjCRbTjZmdqYmCSI2CHxbbZnJrDj3oqk6PniS+nlzE/VGLzoPdOpS2EvTh8wcLMuswU3CHzcHtET64DCxQZTHu06a8+Fb+YZvHf5hRxKac6GKoVDBvN7XIHxCRil/l8aDe6n/HOdENFpIKxXZYYQJmlMip27cGL+Fd4qThrzF39H3faE9O1h/B0L8Nve4X3MoDHMGra8z/xf40PSE7J9r+GvPqDRqT7pDccwrDp5wYCyzRttBh9LuViwFi0wAD2lXYq0/kGhBt21ue9Cbiy+OH59+gEebOGgpQqWnh//kTAQxcmza0D1WY4wds5Xu/TmsKfTNqsY/6JGBVisqLlMMvl+4crHzFdrn6Hj4KvIBhP92b9Opzv7sEQbKr5D39bYq7lp/9ehC5dFnMKCCBkLo1h10VADOIGHtXuBf/w=
  - secure: oTI8b0jotLz92TVmQ5otojFlZCWoPlvVf5kmEIhZQraeHV1+HIXrNFJ/Fp6kfEuP0qna7As4/wZ8Gx/Ojm/DIbjqsURw+KoG1sfYYJLA8FjPFtlF0SI74Abszaf369HJIUgzxSTDHwwvPJq12nBp1XQz7UmeHJdoEwuNaPHJky0WfY7kGDvKbEuuykHhVLyrgLnxjxfaOBYG8HXok8XusBqwIOqZFAf8pSGtPnSMBHF/TEL2dlEe1TodzAtBWtd1XjLPDAsZqodsdmdS6Z/wbw8e/5/n/5/LCqt5AS1wsnblrq6qZRmcZBrZRtP5ScN2YvOZt60iDg+X32BH7qEabyiX5oW8xFyM+JCcN8unLwSjfw6VIPSeGqY7i3opevt5rIaAFhXfP0/QjB3ZAI6llPsJpwdGkhks/LTVT8zfk8gJVOtZgJuQFfgyjFCWU7iB6yBMdxqIAJOTNRS+AKXNLnMSL4suOcDNuSE3tiiiiWANh4MKsj7UNCOwMAlmW9lfHFbxoXyKdxbBLrOICj+7IuET9mhn3+ABJFmtXUTu54G7pa3nSUpCh+pFIEK9H7y+8Z4Ze6kT4AbbInScJwxmORppsTymWlbVQEDcmq81H/9/oJ/V4GZlcfBFJV28pRXDLoab+BwYgu9zH2RQxBdp8iNtJQEuPGXT9KZf8tNibKc=
  - secure: q+YrjEaJxtnamPn5WtdCiRfBoKafwZ9AzQCH7lKnIHrhx4euN6P0+00QqMJUpsHlJ78DXQ0qEb+ml2ByMxLYuUTrDUhq4972/Mhyhg26SrZ0t7scA1Fi9iSQN1A4PgQS4MqD0PCTD+2a2ayK8Wf1BxesM2e+JDotYNxZGG3tsCCL4S4gr0oD6zEmaTRbDMxfXrcFg750jWMXzyES7tbnh6mT50YIIQw8mr5MiM6ejVbx8AfvmMGtEo3xN5o2VUCoIDMTuiIHpZIdCmQqFrxr5i9C1fdmNoPLNHchJgbLCjWRZP2p0ZmGd1uyXmM4WEjcMQKhngAHGaE4OlfVJnvC103EqulXuKPRKzvLFof4TDOcOEgdB8qafkCwjawbkA5P1xv/XOzu96ELoQoGblN/1bqpi3625DWjWDArg80OxJRT5uRIOnZARIs1ADeRjU3Kdbut5aAU72TRKssqArjc5vzLeaTJs/Ej3rITf+WQU8XsbmA/htVPK+JfTHicC+XmSo9MlJBWDeyhQDxwHR5enWXsPJtqT5S8GdIbpk+cZObCezG7g2wFTV3AGa9zvgDDUwEvkXCfMntHpbcDwrHgbkmPFP3+147jPKugAhH95/5hrQD3h2x0d+MAv76UVykoxCwN0LxtoQsg596efSwF0op84z4uUzR+8vgMflF8ZB4=
  - secure: i82zd1XpRYF10ZYkVK4li1zV/ew3Yg8+x0OL2cTPc+sfFkW5EleOqme2DlWvqSgV+ws9SE1i9AVTy41FoIXdXEHdRTBxDtmE6juVNZ1Zabv09EPhuKkgslFxhS1SVItKluyLhAGoAx31j8DXzaZUYxrRKrgvtcBRIAOIASf6qLx85o0qNxIz2Q0udNT+bj4rxTfB1e90cF35+XpbgZdDKRFjsQgrzi7xKFM88fpz26EngBjc5uq4v6kfhF4479QSi1dAfpFUf1CbS4rpc4mBEU4+3OOrYkLfHJ8lXdvUlO7blvMQnxYPD8rD6LbOlxozkfrvSKu62XH+teR/fXKMdW3rnSBOQNHFVDIIcARLmfOiM8M0Jho6HOBqYyFa4blKfZs97BlwEXNYpvnA3zP+d0TBQVxviEr+ePdtcBPJgr5cNID99c17JAxK42exZCypf4Smco5ZbxPsYS0T6IfcHDbW4vnLvxiv1xCRDYxDfJ9udEriy0Tx43tetjhCKLnQU0Wj2RZInyFKUrDZE+lKJ+A3ix9LhXUtBcdo7J4kozPGaiCFv3QXWenmp74/aB7OZ1nI4A3uALhZuUJ1BwpUPSTEoQY7MozdTZOYp2+4H9UOZNguj1GIYJo1WoB5ABAhANBMTS/7sM7CcfdjDC+Jho5l+zOPIgVQk+gGinSKjxg=
  - secure: f5JYcSrXk2ZacWXbiiUVUVo1CYwH3de804RSdxdSsatPOiDu+a2yQRZIFA3Llt45WSdw/ICq68qV1ewtTEH/ojPJ41nQ7P9nMCKqcG18FJzdgxCamsoZlR4SWeXoihgpDc2yM1LVdPH++YV08C4RTXp881GP65MKEYvVcEjfa9HYTDX6BRPLdU5cCzZjeETL6fTLfGbvvwH3VDFXyHZDCrK5kCJX/KSgiyZhu0Gs0uDSba/NRuEaXqaKPmssjrHJvSiOR4WvCIXBW3qesWKoSdpGL/JaOxwcHHZ4NWHm2WFgB1xBE5b2sAaMZ++9QNyKwhu9BVxkEUDGGxDtTMJHswBxiGg3a/t4SdKy0WrOJt8JgA4pOLb7jgAhpkYjxhPeXXkPmKozw/L6HeX0QuCQ8RF6Gy1ALMs35COhYmcWnb6gmGDXlWx56LTo1r4NlJw6IGZrEJfB7ICd8yMyZqFIFtZv6kxU6KEwyviJcocBOxPwoLF8Rfx9gbl5yCVX5XU9p5HL6q7Shmj411WVTidl/z/jbFppamsqGLIGxnkk+KI85Qa3TGsCp+XifIjPoIv7a0vTCqaq8Gf5zHP2Bher3yIBMR34V/y3KQzExUZyG9pNzznySch0yLFZVEbQ3ECmXNjPoJodyWwifMqpSQMOxoXUBcctRPXo7NUkiDGNTI4=
  - secure: BitDOU0RWcOODoaWCqmYOWLLsk8MaDHYzZlb2twsiQw5vGEWzn8cGRbAwlmvTKk4cWCFrELEd/exB+6+z99m9Dz+dTsiZBlq6BbSMVPkoqq6YyFT4gKrX0dMMAJ6nyY1jR5UwwzYVQPGepEXaPdjwMa+iLIdwm5CQI5VlbkHJdPmHWy9btSsoTmyJ5b2DnxOEUk9VM2GYRgsUaRHw91DC1z7sizfEGUbb/5Q7bco4z5OWrtiU65ZamCtbZeTE5CI0+rJXfGb8Ce/hZWRbFQYO2lUQPl1FLqICQMcjUIRwm2HheCenP6KgBXWfFeJIMrtva5PhBsUEX2g2vuMioIR55ttWg8I+pYy6bukjIiKK/kxdf42hRN9JEVnOYuZcmDokVfJ548lZbZvCgk1SmrIqFd4hlP0diu364eKNR4uB5Uu3yv+oJtp3uC4/yOFwg0OFDToOdhqn9tsk6H63rmfJyUH3sj06gK+bEP6rf3ZJ+u4RnI+TKO8qo8cYMIGIe1GaPvtt8EzF0ZL/uxuKWslXyzb9ldPEi+eqctZV4ggE/qn8yqdhBqVqJzKbHNfJA6l0HJqMA4jigS7PO72A3Itu0IQVIZmgYrRUCYoyqEkyG2cJs+MapQ6oIAs93HPIoIhM66dnwc9GgF0ATNak0ydiKSGFonQj7om8VteW60fWYg=
  - secure: hIzViUG0TYobrc/jfvR31V5YObn+y3BlBdQ0z4P9Y2G3zeNVdxC3tYVwDA5ffKtjfBPBs4d0yTMeZIhs6pQnU0yVzNqeDV9tDilerJxyRS1R0cnPuBXfEXDeQk5+Do8UMuouf9zEgnAxNYJnE2f7xaT2v+EXRdyqwoLLRV6kyXrlnmVd7n0Q85tcUjav9SC7HqNHaw7zeukEuGaQNwxFbMDqtp8+cQSTL6yAIaoDpp4VEhcrRE96ZXy5WXW79AoMlKhX4kTjOpVcp3dSPZYJE84ryf0OnWgvQRLCoyunmXjyHLbhHZ1v6RHpN4LBSPBbq608e1VJv+dpVS0BZA0n5/s3RfyWTWPfy7bJ/92v3iZkuF2UU8AupWiREDh50rjW+ijFuPFzqDkhqkEY21sLIKjZiGZeitzgRkLiDAYj7zrUkAYIWrBXulhuesrwTVN2MU8gO9b9X0T/Mq0VpUGh//vMOlFhb3tVNhYOVFCGx9u6oQEOp96k9V6p2vFvCjCDxDgYgyJ/v0mlzvLj9et9SlKBnAXTOKQPwjPn0doV8qAmBfJYoITxFSDeeIIhQWcQnVnR86uOglEq99qhuXaqW53xNdiI9PEl74Tq/x2dVEUHwkJ2tPTH6p98Ig7Y3tZU+X6wm+vw10dotWDsA3U9crpy4uorOSw9JYMTTNfKKdM=
  - secure: ui8F2rDqb+VlPT/6pwb/IssyGBdSohEwZ4ib7dhRRWvFNchEBtblDrk/YG2Ha+uUMgoLTYKih7ythhaug0U7qpxGdx++G+zXr0iCA1iT/dunLC3+7WykSBnzk+72RblQZwImeZyEOJ+Bjcjtm6bp7XN9crH2KGF0DqQxEicTyG+J6RCMQsT7K8QLLISpbLe7cw3NdzI0N6/6Te8NGFntUcqmO4iuZ+PPADWuisbru3rzTdqKnn7jAYgX6kS2FsIyDdAFaygzxL1wmzKg19yGgBD5wah3S7NvQ/hRcSUp4+iR7mvBjP8u3mp7x8wWg2tdiFaZfeAFboUTGFOG3srYmuZw/WoPSQS0x7hqfq+CnaaQZykYJ8PZwvvX09XjFPxSap5SsIR+eZHUwiAbo0ipTpIoEGT2AB2sx7naMfIz3zNwffLpk2+g/lPVP8YnrYR9FfkRsuxAQZYFo+tXEi2taY74RBfEYhOyZFoN9o9iGeS97Pd9cSwkLQeZs0gIMqVVY3yeWpl7IZHCh1YZRqd+LV6eSzFu309zG+Nm56CACDqE12RPD8Qu9n1yUx4QjlRjT/RbjmAqno62pYjEUXnx0RNsRKL1cadjB6NNwKKvwhbEDeRjh2YwNnT6dNzHT/N650tCMRhNUmc9heCT6u1mSOvxWtJpe9X19JkIxus/SRQ=
  - secure: 31tGdPHfdke6ZFon6flgc5cJiiEaxGHUisUWKPrMcBN70udYg51voB/yowW8a8mi+3mVNbMKDYtvsWmgAOVxkx0zTrgeRFw/eenVHGfl+LwZTtdhSdkC26GanXVRekblaeadkBaCmr8B2xBnO42u1PW5BRY0pfW8lYoYVPVFUcwSI5bsbZn+kovw8IwlipclM4ik/lfuZ0GU2n9yu7qTFSk8gbEc1rjKYrMSUxs/Gg3nABeytRh/3weS5qjfNhlAl5HO5Ir4tENzqxLzgzy+bbXx2/2qXXhkp4EjBnWwd6HxgNIaraYPl92hewfufa96eC7/TeGHa1xjtxRiJhIcJMA/2uCYnXU/lPFt8L4Re8CKEnShM6Szfk8fE0U5mr9AwbpzZaP5mbCQvmE5XT2O2PG+mYkDTgj9QlHI/JdOKHnXE6wHZfvK/V3Gt0CZa1W6p1RXGB+EukWXZR9aQB2E4UNVGDAnLlEUC/i5fitahG7yF7iEZYUpFVwyuJuzKGIysKiYm2Y3EHLCjFWgjfwTckul/tJrosWVBSqGdXplERjKmpq1aX1afjUwgjrfGgQd/pd32HCMGNPZyiFN71qoB6IhlL2uiFVWRPS9w1UGg6/L/BF+qGyDOmzpk1nQNON7fZH46XbzAXLPGNyiwvxwmgu0830/ogo7CeTA721Puf0=
  - secure: a8Mm8Ysk+Ps1q5TiAney9GpTqiUAjvcRaIIDo3oNy/+SWlSiFIuLygUCW0a8qu6TgsFgJMpl6k0sgMlDj6pP2gmibV3t3XmmP1ZuFez7EhSmUqmGB7xV1xR1YEy31i+Vqh0io56VgvRQFyCAOCo6chEeDjlW3GxGLM6JUU4OYn/aV+KcEh6PsFnhTTAimwTprbGFRWOA2u5Am4uJq9/WciDjSLzvX+QR0g+KcWk/yItJGMISR+oWYmxEhJzSEwpM/4cii/oXvrAFY2Q2hPd8NHxXisfoMBDdaWNQUocby1++MDsATNXZhc2wEf9hM8oRWmmf/p6Qj+y+M7sj4DbAGK3i7pwjan9w9lWgRuxjhHW3BHoBU27Ncc/Ex6IVoPAAtmJ8/M4f/LnP7ywCryNw+r11nkv3VXbI+B9IwFi9yw0EE8AJLccaEvsfqpsCX6Mc9j3a6E8G+7UnKYp4KPBjrN7iWxpzD31mXPV1sbyu4i011QQ9F3s0lssaeJqzYmgwHFEN/4OuIwGHgVsu0iiYeoDC2xrSWvrW4Uu63JiQJPOKTNfANSQ4SbQy0nskydXbGtjjhKJP1almHZZHdmTslJSuT4GP+oz2tWzzcfgdqozkbFHlf2wuJO7G80ICS705TGAI/Wmc6xK3xEuw4P8cB1Jc8HpgKJKtRikE5Mxu0aQ=
